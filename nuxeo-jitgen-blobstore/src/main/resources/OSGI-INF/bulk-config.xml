<?xml version="1.0"?>
<component name="org.nuxeo.bench.bulk.contrib" version="1.0.0">

  <require>org.nuxeo.elasticsearch.core.bulk.contrib</require>

  <extension target="org.nuxeo.ecm.core.bulk" point="actions">
    <action name="index" bucketSize="1000" batchSize="50" enabled="true" />
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <streamProcessor name="reindex" class="org.nuxeo.elasticsearch.bulk.IndexAction" logConfig="bulk"
      defaultConcurrency="6" defaultPartitions="12" enabled="true">
      <!-- concurrency to build indexing requests -->
      <computation name="index" concurrency="6" />
      <!-- concurrency to execute indexing requests -->
      <computation name="bulkIndex" concurrency="2" />
      <computation name="indexCompletion" concurrency="1" />
      <!-- flush elasticsearch bulk request interval -->
      <option name="flushIntervalSeconds">10</option>
    </streamProcessor>

  </extension>

</component>